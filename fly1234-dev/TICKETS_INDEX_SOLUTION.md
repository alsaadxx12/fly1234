# โ ุญู ูุดููุฉ ุนุฏู ุธููุฑ ุงูุชุฐุงูุฑ

## ๐ ุงููุดููุฉ:
ุงูุชุฐุงูุฑ ุงููุถุงูุฉ ูู ูุจู ุงูููุธู ูุง ุชุธูุฑ ูู ุตูุญุฉ ุงูุชุฐุงูุฑ ุงูุฎุงุตุฉ ุจู.

## ๐ ุงูุณุจุจ:
ุนูุฏ ุงุณุชุฎุฏุงู `where('createdBy', '==', user.uid)` ูุน `orderBy('createdAt', 'desc')` ูู ููุณ ุงูููุชุ ูุชุทูุจ Firestore ุฅูุดุงุก **ููุฑุณ ูุฑูุจ (Composite Index)**.

ุจุฏูู ูุฐุง ุงูููุฑุณุ ูู ูุชููู Firestore ูู ุชูููุฐ ุงูุงุณุชุนูุงูุ ูุณุชุธูุฑ ุฑุณุงูุฉ ุฎุทุฃ ูู Console:

```
The query requires an index. You can create it here: https://console.firebase.google.com/...
```

---

## โ ุงูุญู:

### ุงูุทุฑููุฉ ุงูุฃููู: ุนุจุฑ ุฑุณุงูุฉ ุงูุฎุทุฃ (ุงูุฃุณูู)

1. ุงูุชุญ **Console** ูู ูุชุตูุญ ุงููุทูุฑ (F12)
2. ุงุจุญุซ ุนู ุฑุณุงูุฉ ุงูุฎุทุฃ ุงูุชู ุชุจุฏุฃ ุจู:
   ```
   The query requires an index. You can create it here: ...
   ```
3. ุงูุณุฎ ุงูุฑุงุจุท ุงูููุฌูุฏ ูู ุฑุณุงูุฉ ุงูุฎุทุฃ
4. ุงูุชุญ ุงูุฑุงุจุท ูู ูุชุตูุญ ุฌุฏูุฏ
5. ุณูุชู ุชูุฌููู ูุจุงุดุฑุฉ ุฅูู ุตูุญุฉ ุฅูุดุงุก ุงูููุฑุณ ูู Firebase Console
6. ุงุถุบุท ุนูู **Create Index**
7. ุงูุชุธุฑ ุญุชู ููุชูู ุฅูุดุงุก ุงูููุฑุณ (ูุฏ ูุณุชุบุฑู ุจุถุน ุฏูุงุฆู)

---

### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ูุฏููุงู ุนุจุฑ Firebase Console

1. ุงุฐูุจ ุฅูู Firebase Console: https://console.firebase.google.com
2. ุงุฎุชุฑ ูุดุฑูุนู
3. ุงุฐูุจ ุฅูู **Firestore Database**
4. ุงุฎุชุฑ ุชุจููุจ **Indexes**
5. ุงุถุบุท ุนูู **Create Index**
6. ุงููุฃ ุงูุจูุงูุงุช ุงูุชุงููุฉ:

   ```
   Collection ID: tickets

   Fields to index:
   - Field path: createdBy
     Query scope: Collection
     Order: Ascending (ุชุตุงุนุฏู)

   - Field path: createdAt
     Query scope: Collection
     Order: Descending (ุชูุงุฒูู)
   ```

7. ุงุถุบุท ุนูู **Create**
8. ุงูุชุธุฑ ุญุชู ุชุชุญูู ุญุงูุฉ ุงูููุฑุณ ูู **Building** ุฅูู **Enabled**

---

## ๐ ุชูุงุตูู ุงูููุฑุณ ุงููุทููุจ:

| ุงูุญูู | ุงูุชุฑุชูุจ | ุงููุตู |
|------|---------|-------|
| `createdBy` | Ascending | ูููุชุฑุฉ ุงูุชุฐุงูุฑ ุญุณุจ ุงูููุธู |
| `createdAt` | Descending | ูุชุฑุชูุจ ุงูุชุฐุงูุฑ ูู ุงูุฃุญุฏุซ ููุฃูุฏู |

---

## โฑ๏ธ ุงููุฏุฉ ุงููุชููุนุฉ:

- **ุงูุจูุงูุงุช ุงูููููุฉ (< 1000 ุณุฌู)**: 1-3 ุฏูุงุฆู
- **ุงูุจูุงูุงุช ุงููุชูุณุทุฉ (1000-10000 ุณุฌู)**: 5-15 ุฏูููุฉ
- **ุงูุจูุงูุงุช ุงููุจูุฑุฉ (> 10000 ุณุฌู)**: ูุฏ ูุณุชุบุฑู ุณุงุนุฉ ุฃู ุฃูุซุฑ

---

## โ ุงูุชุญูู ูู ูุฌุงุญ ุงูุญู:

ุจุนุฏ ุฅูุดุงุก ุงูููุฑุณ:

1. ุชุฃูุฏ ูู ุฃู ุญุงูุฉ ุงูููุฑุณ ูู Firebase Console ูู **Enabled** โ
2. ุฃุนุฏ ุชุญููู ุตูุญุฉ ุงูุชุทุจูู (F5)
3. ูู ุจุชุณุฌูู ุงูุฏุฎูู
4. ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุชุฐุงูุฑ
5. ูุฌุจ ุฃู ุชุธูุฑ ุฌููุน ุงูุชุฐุงูุฑ ุงูุชู ุฃุฏุฎููุง ุงูููุธู โ

---

## ๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ค ุงูููุธู: ุนูู                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โ ูุฑู ุฌููุน ุชุฐุงูุฑู ุงูุชู ุฃุฏุฎููุง                โ
โ โ ุงูุชุฐุงูุฑ ูุฑุชุจุฉ ูู ุงูุฃุญุฏุซ ููุฃูุฏู             โ
โ โ ูุง ูุฑู ุชุฐุงูุฑ ุงูููุธููู ุงูุขุฎุฑูู              โ
โ โ ุงูุณุฑุนุฉ ููุชุงุฒุฉ ุจูุถู ุงูููุฑุณ                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ:

1. **ูุง ุชุญุฐู ุงูููุฑุณ**: ุญุฐู ุงูููุฑุณ ุณูุคุฏู ุฅูู ุชููู ุตูุญุฉ ุงูุชุฐุงูุฑ ุนู ุงูุนูู
2. **ุงูููุฑุณ ุฏุงุฆู**: ุจุนุฏ ุฅูุดุงุก ุงูููุฑุณ ูุฑุฉ ูุงุญุฏุฉุ ุณูุจูู ููุฌูุฏุงู ููู ุชุญุชุงุฌ ูุฅุนุงุฏุฉ ุฅูุดุงุฆู
3. **ุงูุชูููุฉ**: ุงูููุงุฑุณ ูุง ุชููู ุฃู ุดูุก ุฅุถุงูู ูู Firestore
4. **ุงูุฃุฏุงุก**: ุงูููุฑุณ ูุญุณู ุงูุฃุฏุงุก ุจุดูู ูุจูุฑ ุฌุฏุงู

---

## ๐ง ุงูููุฏ ุงููุณุชุฎุฏู:

ูู ููู `src/pages/Tickets/hooks/useTickets.ts`:

```typescript
const ticketsQuery = query(
  collection(db, 'tickets'),
  where('createdBy', '==', user.uid),  // ูุชุทูุจ ููุฑุณ
  orderBy('createdAt', 'desc')         // ูุชุทูุจ ููุฑุณ
);
```

ูุฐุง ุงูุงุณุชุนูุงู ูุญุชุงุฌ ุฅูู ููุฑุณ ูุฑูุจ ุนูู ุงูุญูููู ูุนุงู.

---

## ๐ ุงูุฏุนู:

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:
1. ุชุฃูุฏ ูู ุฃูู Admin ูู Firebase Console
2. ุชุญูู ูู ุญุงูุฉ ุงูููุฑุณ (Enabled ูููุณ Building ุฃู Error)
3. ุฌุฑุจ ุชุญุฏูุซ ุงูุตูุญุฉ ุจููุฉ: `Ctrl + Shift + R`
4. ุชุญูู ูู Console ููุฃุฎุทุงุก ุงูุฌุฏูุฏุฉ
